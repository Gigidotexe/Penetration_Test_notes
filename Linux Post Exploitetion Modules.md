
# Moduli di Post Exploitation per Linuc
MEtaasploit mette a disposizione numerosi moduli di post exploitation per linux con cui possiamo 
- Enumerare le configurazioni di sistema
- Enumerare le variabili d'ambiente
- Enumerare la configurazione di rete
- Verificare se il target é una macchina virtuale
- Enumerare la cronologia degli utenti

```bash
use post/linux/gather/enum_config            # modulo per ottenere informazioni di sistema tramite i file di configurazione
use post/multi/gather/env                    # modulo per raccoglie le impostazioni sulle variabili d'ambiente
use post/linux/gather/enum_network           # modulo per ottenere automaticamente le impostazioni di rete come configuration del firewall, la configurazione del DNS, chiavi SSH, eccetera.
use post/linux/gather/emum_protection        # modulo per identificare i sistemi di sicurezza del target come SMAP, SELinux, PaX e grsecurity
                                             # esegui il comando `notes` per visualizzare queste informazioni raccolte
use psot/lunux/gather/enum_system            # modulo per ottenere informazioni sul sistema target e sugli utenti 
use post/linuc/gather/check_containeer       # modulo per identificare se il target é un container per poi eseguire un attacco di breakout container
use post/linux/gather/check_vm               # modulo per identificare se il target é una Macchina Virtuale
use post/linux/gather/enum_users_history     # modulo per identificare la cronologia degli utenti 
```
```bash
use post/multi/gather/ssh_creds               # modulo che enta di trovare le credenziali SSH
use post/multi/gather/docker_creds            # modulo che estrae le credenziali di Docker, come token di autenticazione o file di configurazione, da sistemi sia Linux che Windows
use post/linux/gather/hashdump                # modulo per umperare gli hash delle password da un sistema Linux.
use post/linux/gather/ecryptfs_creds          # modulo che cerca le credenziali di eCryptfs, un sistema di filesystem cifrato usato spesso su Linux
use post/linux/gather/enum_psk                # modulo che enumera le Pre-Shared Key (PSK) di configurazioni VPN (come IPsec).
use post/linux/gather/enum_xchat              # modulo che cerca informazioni relative a XChat, un client IRC per Linux.
use post/linux/gather/phpmyadmin_credsteal    # modulo che estrae le credenziali di phpMyAdmin, spesso presenti in file di configurazione (config.inc.php) su server web Linux.
use post/linux/gather/pptpd_chap_secrets      # modulo che cerca di estrarre file come /etc/ppp/chap-secrets che contengono le credenziali degli utenti PPP, usati da server VPN come PPTP.
use post/linux/manage/sshkey_persistence      # modulo che crea una persistenza SSH sul target.
#Aggiunge una chiave pubblica (id_rsa.pub) al file authorized_keys dell’utente scelto, in modo che ci si possa ricconettere
#via SSH senza password in futuro.
```

tutti questi moduli otterranno informazioni sul sitema e possiamo visualizzare tutte le informazioni ottenute usando il comando `loot` su Metasploit per poi andare a visionare il file creato conteente le inforamzioni usando `cat` seguito dal path del file creato.





## Enumerazione interna manuale
Quando ci troviamo dentro un target dobbiamo eseguire questi comandi per ottenere piú informazioni possibili sul target
```bash
/bin/bash -i              # per aprire una shell bash (a volte viene aperta una shell root)
cat /etc/passwd           # per vedere quanti account sono presenti
groups root               # per vedere quali utenti fanno parte del gruppo root
cat /etc/*issue           # per vedere la distibuzione linux del target
uname -r                  # per vedere la versione del kernel
uname -a                  # informazioni aggiuntive come hostname e kernel version
ip a s                    # per ottenere informazioni sulle interfacce di rete
ps                        # per vedere i processiattivi
env                       # per enumerare le variabili d'ambiente 
netstat -antp             # per mostrare in dettaglio tutte le connessioni di rete TCP attive
```
con `netstat -antp`
- `-a` Mostra tutte le connessioni e le porte in ascolto
- `-n` Mostra indirizzi IP e numeri di porta in formato numerico
- `-t` Limita l’output a solo connessioni TCP
- `-p` Mostra il PID e il nome del processo associato a ciascuna connessione

---
